{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\catas\\\\Desktop\\\\Basic Chess Game\\\\client\\\\src\\\\App.js\";\nimport Chessboard from \"chessboardjsx\";\nimport io from 'socket.io-client';\nimport { Chess } from \"chess.js\";\nimport { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\n// \\\\\\useEffect(() => {\n//   socket.on(\"receive_message\", (data) => {\n//     setMessageReceived(data);\n//   });\n// }, [socket])\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STOCKFISH = window.STOCKFISH;\nconst socket = io.connect(\"http://localhost:3001\");\nconst game = new Chess();\n// let player = {\n//   turn : true,\n//   whiteTeam : true\n// }\n\n// const joinTeam = (whiteTeam) => {\n//   if (whiteTeam) io.;\n// }\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.sendRating = (rating, position) => {\n      socket.emit(\"player_move\", {\n        rating: rating,\n        position: position\n      });\n    };\n    this.joinTeam = (team, isWhite) => {\n      socket.emit(\"join_team\", team);\n      this.setState({\n        isWhite: isWhite\n      });\n    };\n    this.onDrop = _ref => {\n      let {\n        sourceSquare,\n        targetSquare\n      } = _ref;\n      const move = game.move({\n        from: sourceSquare,\n        to: targetSquare\n      });\n\n      // grab player proposed position and show it\n      this.setState({\n        fen: game.fen()\n      });\n      if (move === null) return; // illegal move  \n\n      game.undo();\n\n      //grab the rating of the move\n      // const rating = engineGame().evalMove(proposed)\n\n      return new Promise(resolve => {\n        resolve();\n      }).then(() => this.engineGame().evalMove());\n    };\n    this.engineGame = options => {\n      options = options || {};\n\n      /// We can load Stockfish via Web Workers or via STOCKFISH() if loaded from a <script> tag.\n      let engine = typeof STOCKFISH === \"function\" ? STOCKFISH() : new Worker(options.stockfishjs || \"stockfish.js\");\n      let announced_game_over;\n      setInterval(() => {\n        if (announced_game_over) {\n          return;\n        }\n        if (game.isGameOver()) {\n          announced_game_over = true;\n        }\n      }, 500);\n      const evalMove = () => {\n        if (!game.isGameOver()) {\n          engine.postMessage(\"ucinewgame\");\n          engine.postMessage(\"position fen \" + this.state.fen);\n          engine.postMessage(\"eval\");\n        }\n      };\n      engine.onmessage = event => {\n        let line;\n        if (event && typeof event === \"object\") {\n          line = event.data;\n        } else {\n          line = event;\n        }\n        if (line.substr(0, \"Total Evaluation\".length) === \"Total Evaluation\") {\n          let score = parseFloat(line.substr(18).substr(0, 4));\n          //this.setState({ rating: score });\n          this.sendRating(score, this.state.fen);\n        }\n      };\n      return {\n        start: function () {\n          engine.postMessage(\"ucinewgame\");\n          engine.postMessage(\"isready\");\n          announced_game_over = false;\n        },\n        evalMove: function () {\n          evalMove();\n        }\n      };\n    };\n    this.state = {\n      fen: \"start\",\n      turn: true,\n      isWhite: true\n    };\n    this.sendRating = this.sendRating.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n  }\n  // useEffect(() => {\n  //   socket.on(\"receive_move\", (move) => {\n  //     if (move === null) return;\n  //     setPosition(move);\n  //   });\n  // }, [socket])\n  render() {\n    const whiteTeam = /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"White Team\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 19\n    }, this);\n    const blackTeam = /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Black Team \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 19\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: boardsContainer,\n      children: [/*#__PURE__*/_jsxDEV(Chessboard, {\n        id: \"board!\",\n        position: this.state.fen,\n        width: 320,\n        onDrop: this.onDrop,\n        boardStyle: boardStyle,\n        orientation: \"white\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        value: \"white\",\n        onClick: e => this.joinTeam(e.target.value, true),\n        children: \"Join White Team\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        value: \"black\",\n        onClick: e => this.joinTeam(e.target.value, false),\n        children: \"Join Black Team\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: this.state.isWhite ? whiteTeam : blackTeam\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Your off\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }, this);\n  }\n}\nexport default App;\nconst boardsContainer = {\n  display: \"flex\",\n  justifyContent: \"space-around\",\n  alignItems: \"center\"\n};\nconst boardStyle = {\n  borderRadius: \"5px\",\n  boxShadow: `0 5px 15px rgba(0, 0, 0, 0.5)`\n};","map":{"version":3,"names":["Chessboard","io","Chess","Component","PropTypes","STOCKFISH","window","socket","connect","game","App","constructor","props","sendRating","rating","position","emit","joinTeam","team","isWhite","setState","onDrop","sourceSquare","targetSquare","move","from","to","fen","undo","Promise","resolve","then","engineGame","evalMove","options","engine","Worker","stockfishjs","announced_game_over","setInterval","isGameOver","postMessage","state","onmessage","event","line","data","substr","length","score","parseFloat","start","turn","bind","render","whiteTeam","blackTeam","boardsContainer","boardStyle","e","target","value","display","justifyContent","alignItems","borderRadius","boxShadow"],"sources":["C:/Users/catas/Desktop/Basic Chess Game/client/src/App.js"],"sourcesContent":["import Chessboard from \"chessboardjsx\";\nimport io from 'socket.io-client';\nimport { Chess } from \"chess.js\";\nimport { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\n\n// \\\\\\useEffect(() => {\n//   socket.on(\"receive_message\", (data) => {\n//     setMessageReceived(data);\n//   });\n// }, [socket])\n\nconst STOCKFISH = window.STOCKFISH;\nconst socket = io.connect(\"http://localhost:3001\");\nconst game = new Chess();\n// let player = {\n//   turn : true,\n//   whiteTeam : true\n// }\n\n// const joinTeam = (whiteTeam) => {\n//   if (whiteTeam) io.;\n// }\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { \n      fen: \"start\", \n      turn : true,\n      isWhite : true\n    };\n    this.sendRating= this.sendRating.bind(this);\n    this.onDrop= this.onDrop.bind(this);\n  }\n  \n  sendRating = (rating, position) => {\n    socket.emit(\"player_move\", ({rating: rating, position: position}));\n  };\n\n  joinTeam = (team, isWhite) => {\n    socket.emit(\"join_team\", team);\n    this.setState({isWhite : isWhite});\n  } \n\n  onDrop = ({ sourceSquare, targetSquare }) => {\n    const move = game.move({ from: sourceSquare, to: targetSquare })\n\n    // grab player proposed position and show it\n    this.setState({ fen: game.fen() })\n\n    if (move === null) return; // illegal move  \n\n    game.undo();\n\n    //grab the rating of the move\n    // const rating = engineGame().evalMove(proposed)\n\n    return new Promise((resolve) => {\n      resolve();\n    }).then(() => this.engineGame().evalMove());\n  };\n\n  engineGame = (options) => {\n    options = options || {};\n\n    /// We can load Stockfish via Web Workers or via STOCKFISH() if loaded from a <script> tag.\n    let engine =\n      typeof STOCKFISH === \"function\"\n        ? STOCKFISH()\n        : new Worker(options.stockfishjs || \"stockfish.js\");\n    let announced_game_over;\n\n    setInterval(() => {\n      if (announced_game_over) {\n        return;\n      }\n      if (game.isGameOver()) {\n        announced_game_over = true;\n      }\n    }, 500);\n\n    const evalMove = () => {\n      if (!game.isGameOver()) {\n        engine.postMessage(\"ucinewgame\");\n        engine.postMessage(\"position fen \" + this.state.fen);\n        engine.postMessage(\"eval\");\n      }\n    };\n\n    engine.onmessage = (event) => {\n      let line;\n\n      if (event && typeof event === \"object\") {\n        line = event.data;\n      } else {\n        line = event;\n      }\n      if (line.substr(0, \"Total Evaluation\".length) === \"Total Evaluation\") {\n        let score = parseFloat(line.substr(18).substr(0, 4));\n        //this.setState({ rating: score });\n        this.sendRating(score,this.state.fen);\n      }\n    };\n\n    return {  \n      start: function () {\n        engine.postMessage(\"ucinewgame\");\n        engine.postMessage(\"isready\");\n        announced_game_over = false;\n      },\n      evalMove: function () {\n        evalMove();\n      },\n    };\n  };\n\n  // useEffect(() => {\n  //   socket.on(\"receive_move\", (move) => {\n  //     if (move === null) return;\n  //     setPosition(move);\n  //   });\n  // }, [socket])\nrender(){\n\nconst whiteTeam = <h2>White Team</h2>\nconst blackTeam = <h2>Black Team </h2>\n\n  return(\n    <div style = { boardsContainer } >\n      <Chessboard\n        id=\"board!\"\n        position={this.state.fen}\n        width={320}\n        onDrop={this.onDrop}\n        boardStyle={boardStyle}\n        orientation=\"white\"\n      />\n      <button value = \"white\" onClick = {e => this.joinTeam(e.target.value, true)} >Join White Team</button>\n      <button value = \"black\" onClick = {e => this.joinTeam(e.target.value, false)} >Join Black Team</button>\n      <h1>{this.state.isWhite? whiteTeam : blackTeam }</h1>\n      <h1>Your off</h1>\n    </div>\n  );\n}\n}\n\nexport default App;\n\nconst boardsContainer = {\n  display: \"flex\",\n  justifyContent: \"space-around\",\n  alignItems: \"center\"\n};\nconst boardStyle = {\n  borderRadius: \"5px\",\n  boxShadow: `0 5px 15px rgba(0, 0, 0, 0.5)`\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}