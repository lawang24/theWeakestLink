{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\catas\\\\Desktop\\\\Basic Chess Game\\\\client\\\\src\\\\integrations\\\\pvp.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Chess } from \"chess.js\"; // import Chess from  \"chess.js\"(default) if recieving an error about new Chess() not being a constructor\n\nimport Chessboard from \"chessboardjsx\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass PVP extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      fen: \"start\",\n      // square with the currently clicked piece\n      pieceSquare: \"\",\n      // currently clicked square\n      square: \"\",\n      // array of past game moves\n      history: []\n    };\n    this.onDrop = _ref => {\n      let {\n        sourceSquare,\n        targetSquare\n      } = _ref;\n      // see if the move is legal\n      let move = this.game.move({\n        from: sourceSquare,\n        to: targetSquare,\n        promotion: \"q\" // always promote to a queen for example simplicity\n      });\n\n      // illegal move\n      if (move === null) return;\n      this.setState(_ref2 => {\n        let {\n          history,\n          pieceSquare\n        } = _ref2;\n        return {\n          fen: this.game.fen(),\n          history: this.game.history({\n            verbose: true\n          })\n        };\n      });\n    };\n    this.onSquareClick = square => {\n      this.setState(_ref3 => {\n        let {\n          history\n        } = _ref3;\n        return {\n          squareStyles: squareStyling({\n            pieceSquare: square,\n            history\n          }),\n          pieceSquare: square\n        };\n      });\n      let move = this.game.move({\n        from: this.state.pieceSquare,\n        to: square,\n        promotion: \"q\" // always promote to a queen for example simplicity\n      });\n\n      // illegal move\n      if (move === null) return;\n      this.setState({\n        fen: this.game.fen(),\n        history: this.game.history({\n          verbose: true\n        }),\n        pieceSquare: \"\"\n      });\n    };\n    this.onSquareRightClick = square => this.setState({\n      squareStyles: {\n        [square]: {\n          backgroundColor: \"deepPink\"\n        }\n      }\n    });\n  }\n  componentDidMount() {\n    this.game = new Chess();\n  }\n  render() {\n    const {\n      fen,\n      dropSquareStyle,\n      squareStyles\n    } = this.state;\n    return this.props.children({\n      squareStyles,\n      position: fen,\n      onMouseOverSquare: this.onMouseOverSquare,\n      onMouseOutSquare: this.onMouseOutSquare,\n      onDrop: this.onDrop,\n      dropSquareStyle,\n      onDragOverSquare: this.onDragOverSquare,\n      onSquareClick: this.onSquareClick,\n      onSquareRightClick: this.onSquareRightClick\n    });\n  }\n}\nPVP.propTypes = {\n  children: PropTypes.func\n};\nexport default function WithMoveValidation() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(PVP, {\n      children: _ref4 => {\n        let {\n          position,\n          onDrop,\n          onMouseOverSquare,\n          onMouseOutSquare,\n          squareStyles,\n          dropSquareStyle,\n          onDragOverSquare,\n          onSquareClick,\n          onSquareRightClick\n        } = _ref4;\n        return /*#__PURE__*/_jsxDEV(Chessboard, {\n          id: \"PVP\",\n          width: 320,\n          position: position,\n          onDrop: onDrop,\n          onMouseOverSquare: onMouseOverSquare,\n          onMouseOutSquare: onMouseOutSquare,\n          boardStyle: {\n            borderRadius: \"5px\",\n            boxShadow: `0 5px 15px rgba(0, 0, 0, 0.5)`\n          },\n          squareStyles: squareStyles,\n          dropSquareStyle: dropSquareStyle,\n          onDragOverSquare: onDragOverSquare,\n          onSquareClick: onSquareClick,\n          onSquareRightClick: onSquareRightClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n_c = WithMoveValidation;\nconst squareStyling = _ref5 => {\n  let {\n    pieceSquare,\n    history\n  } = _ref5;\n  const sourceSquare = history.length && history[history.length - 1].from;\n  const targetSquare = history.length && history[history.length - 1].to;\n  return {\n    [pieceSquare]: {\n      backgroundColor: \"rgba(255, 255, 0, 0.4)\"\n    },\n    ...(history.length && {\n      [sourceSquare]: {\n        backgroundColor: \"rgba(255, 255, 0, 0.4)\"\n      }\n    }),\n    ...(history.length && {\n      [targetSquare]: {\n        backgroundColor: \"rgba(255, 255, 0, 0.4)\"\n      }\n    })\n  };\n};\nvar _c;\n$RefreshReg$(_c, \"WithMoveValidation\");","map":{"version":3,"names":["React","Component","PropTypes","Chess","Chessboard","PVP","state","fen","pieceSquare","square","history","onDrop","sourceSquare","targetSquare","move","game","from","to","promotion","setState","verbose","onSquareClick","squareStyles","squareStyling","onSquareRightClick","backgroundColor","componentDidMount","render","dropSquareStyle","props","children","position","onMouseOverSquare","onMouseOutSquare","onDragOverSquare","propTypes","func","WithMoveValidation","borderRadius","boxShadow","length"],"sources":["C:/Users/catas/Desktop/Basic Chess Game/client/src/integrations/pvp.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Chess } from \"chess.js\"; // import Chess from  \"chess.js\"(default) if recieving an error about new Chess() not being a constructor\r\n\r\nimport Chessboard from \"chessboardjsx\";\r\n\r\nclass PVP extends Component {\r\n  static propTypes = { children: PropTypes.func };\r\n\r\n  state = {\r\n    fen: \"start\",\r\n    // square with the currently clicked piece\r\n    pieceSquare: \"\",\r\n    // currently clicked square\r\n    square: \"\",\r\n    // array of past game moves\r\n    history: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.game = new Chess();\r\n  }\r\n\r\n  onDrop = ({ sourceSquare, targetSquare }) => {\r\n    // see if the move is legal\r\n    let move = this.game.move({\r\n      from: sourceSquare,\r\n      to: targetSquare,\r\n      promotion: \"q\" // always promote to a queen for example simplicity\r\n    });\r\n\r\n    // illegal move\r\n    if (move === null) return;\r\n    this.setState(({ history, pieceSquare }) => ({\r\n      fen: this.game.fen(),\r\n      history: this.game.history({ verbose: true }),\r\n    }));\r\n  };\r\n\r\n  onSquareClick = square => {\r\n    this.setState(({ history }) => ({\r\n      squareStyles: squareStyling({ pieceSquare: square, history }),\r\n      pieceSquare: square\r\n    }));\r\n\r\n    let move = this.game.move({\r\n      from: this.state.pieceSquare,\r\n      to: square,\r\n      promotion: \"q\" // always promote to a queen for example simplicity\r\n    });\r\n\r\n    // illegal move\r\n    if (move === null) return;\r\n\r\n    this.setState({\r\n      fen: this.game.fen(),\r\n      history: this.game.history({ verbose: true }),\r\n      pieceSquare: \"\"\r\n    });\r\n  };\r\n\r\n  onSquareRightClick = square =>\r\n    this.setState({\r\n      squareStyles: { [square]: { backgroundColor: \"deepPink\" } }\r\n    });\r\n\r\n  render() {\r\n    const { fen, dropSquareStyle, squareStyles } = this.state;\r\n\r\n    return this.props.children({\r\n      squareStyles,\r\n      position: fen,\r\n      onMouseOverSquare: this.onMouseOverSquare,\r\n      onMouseOutSquare: this.onMouseOutSquare,\r\n      onDrop: this.onDrop,\r\n      dropSquareStyle,\r\n      onDragOverSquare: this.onDragOverSquare,\r\n      onSquareClick: this.onSquareClick,\r\n      onSquareRightClick: this.onSquareRightClick\r\n    });\r\n  }\r\n}\r\n\r\nexport default function WithMoveValidation() {\r\n  return (\r\n    <div>\r\n      <PVP>\r\n        {({\r\n          position,\r\n          onDrop,\r\n          onMouseOverSquare,\r\n          onMouseOutSquare,\r\n          squareStyles,\r\n          dropSquareStyle,\r\n          onDragOverSquare,\r\n          onSquareClick,\r\n          onSquareRightClick\r\n        }) => (\r\n          <Chessboard\r\n            id=\"PVP\"\r\n            width={320}\r\n            position={position}\r\n            onDrop={onDrop}\r\n            onMouseOverSquare={onMouseOverSquare}\r\n            onMouseOutSquare={onMouseOutSquare}\r\n            boardStyle={{\r\n              borderRadius: \"5px\",\r\n              boxShadow: `0 5px 15px rgba(0, 0, 0, 0.5)`\r\n            }}\r\n            squareStyles={squareStyles}\r\n            dropSquareStyle={dropSquareStyle}\r\n            onDragOverSquare={onDragOverSquare}\r\n            onSquareClick={onSquareClick}\r\n            onSquareRightClick={onSquareRightClick}\r\n          />\r\n        )}\r\n      </PVP>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst squareStyling = ({ pieceSquare, history }) => {\r\n  const sourceSquare = history.length && history[history.length - 1].from;\r\n  const targetSquare = history.length && history[history.length - 1].to;\r\n\r\n  return {\r\n    [pieceSquare]: { backgroundColor: \"rgba(255, 255, 0, 0.4)\" },\r\n    ...(history.length && {\r\n      [sourceSquare]: {\r\n        backgroundColor: \"rgba(255, 255, 0, 0.4)\"\r\n      }\r\n    }),\r\n    ...(history.length && {\r\n      [targetSquare]: {\r\n        backgroundColor: \"rgba(255, 255, 0, 0.4)\"\r\n      }\r\n    })\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}